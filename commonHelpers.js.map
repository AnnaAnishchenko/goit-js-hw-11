{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["//pixabay.com/api/\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\n\nconst createGalleryCardTemplate = imgInfo => {\n  return `\n  <li class=\"gallery-card\">\n    <img class=\"gallery-img\"\n    src=\"${imgInfo.webformatURL}\" \n    alt=\"${imgInfo.tags}\" />\n    <div class=\"info\">\n      <p><b>Likes:</b> ${imgInfo.likes}</p>\n      <p><b>Views:</b> ${imgInfo.views}</p>\n      <p><b>Comments:</b> ${imgInfo.comments}</p>\n      <p><b>Downloads:</b> ${imgInfo.downloads}</p>\n    </div>\n  </li>\n  `;\n};\n\nconst onSearchFormSubmit = event => {\n  // відміна дії за замовчуванням\n  event.preventDefault();\n\n  //значення елемента форми\n  const searchedValue = searchFormEl.elements.user_query.value.trim();\n\n  // Перевірка на порожній запит\n  if (!searchedValue) {\n    iziToast.error({ title: 'Error', message: 'Please enter a search query!' });\n    return;\n  }\n\n  // Очищення галереї перед новим пошуком\n  galleryEl.innerHTML = '';\n\n  // Запит на сервер\n  fetch(\n    `https://pixabay.com/api/?key=45552769-3540ba49dba2ab2d34c825df8&query=${searchedValue}&image_type=photo&orientation=horizontal&safesearch=true&per_page=20`\n  )\n    // перевірка\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      return response.json();\n    })\n    // отримуємо дані\n    .then(data => {\n      // Перевірка на відсутність результатів\n      if (data.hits.length === 0) {\n        iziToast.warning({\n          title: 'Warning',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n        return;\n      }\n\n      // Перебираємо масив, додаємо всі елементи\n      const galleryCardsTemplate = data.hits\n        .map(imgDetails => createGalleryCardTemplate(imgDetails))\n        .join('');\n\n      // Додаємо в розмітку HTML\n      galleryEl.innerHTML = galleryCardsTemplate;\n    })\n    // ловимо помилку\n    .catch(err => {\n      iziToast.error({\n        title: 'Error',\n        message: `An error occurred: ${err.message}`,\n      });\n    });\n};\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\n"],"names":["searchFormEl","galleryEl","createGalleryCardTemplate","imgInfo","onSearchFormSubmit","event","searchedValue","iziToast","response","data","galleryCardsTemplate","imgDetails","err"],"mappings":"svBAKA,MAAMA,EAAe,SAAS,cAAc,iBAAiB,EACvDC,EAAY,SAAS,cAAc,aAAa,EAEhDC,EAA4BC,GACzB;AAAA;AAAA;AAAA,WAGEA,EAAQ,YAAY;AAAA,WACpBA,EAAQ,IAAI;AAAA;AAAA,yBAEEA,EAAQ,KAAK;AAAA,yBACbA,EAAQ,KAAK;AAAA,4BACVA,EAAQ,QAAQ;AAAA,6BACfA,EAAQ,SAAS;AAAA;AAAA;AAAA,IAMxCC,EAAqBC,GAAS,CAElCA,EAAM,eAAc,EAGpB,MAAMC,EAAgBN,EAAa,SAAS,WAAW,MAAM,OAG7D,GAAI,CAACM,EAAe,CAClBC,EAAS,MAAM,CAAE,MAAO,QAAS,QAAS,8BAA8B,CAAE,EAC1E,MACD,CAGDN,EAAU,UAAY,GAGtB,MACE,yEAAyEK,CAAa,sEACvF,EAEE,KAAKE,GAAY,CAChB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,OAAOA,EAAS,MACtB,CAAK,EAEA,KAAKC,GAAQ,CAEZ,GAAIA,EAAK,KAAK,SAAW,EAAG,CAC1BF,EAAS,QAAQ,CACf,MAAO,UACP,QACE,0EACZ,CAAS,EACD,MACD,CAGD,MAAMG,EAAuBD,EAAK,KAC/B,IAAIE,GAAcT,EAA0BS,CAAU,CAAC,EACvD,KAAK,EAAE,EAGVV,EAAU,UAAYS,CAC5B,CAAK,EAEA,MAAME,GAAO,CACZL,EAAS,MAAM,CACb,MAAO,QACP,QAAS,sBAAsBK,EAAI,OAAO,EAClD,CAAO,CACP,CAAK,CACL,EAEAZ,EAAa,iBAAiB,SAAUI,CAAkB"}