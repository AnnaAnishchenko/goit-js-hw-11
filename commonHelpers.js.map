{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["//pixabay.com/api/\n\n// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loaderEl = document.querySelector('.js-loader');\n\nconst createGalleryCardTemplate = imgInfo => {\n  return `\n  <li class=\"gallery-card\">\n  <a href=\"${imgInfo.largeImageURL}\">\n     <img class=\"gallery-img\"\n      src=\"${imgInfo.webformatURL}\" \n      alt=\"${imgInfo.tags}\" />\n  </a>\n    <div class=\"info\">\n      <p><b>Likes:</b> ${imgInfo.likes}</p>\n      <p><b>Views:</b> ${imgInfo.views}</p>\n      <p><b>Comments:</b> ${imgInfo.comments}</p>\n      <p><b>Downloads:</b> ${imgInfo.downloads}</p>\n    </div>\n  </li>\n  `;\n};\n\n// Створюємо екземпляр SimpleLightbox\nlet lightbox = new SimpleLightbox('.js-gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\n//функції для показу  завантажувача\nconst showLoader = () => {\n  loaderEl.style.display = 'block';\n};\n\n//функції для приховування завантажувача\nconst hideLoader = () => {\n  loaderEl.style.display = 'none';\n};\n\nconst onSearchFormSubmit = event => {\n  // відміна дії за замовчуванням\n  event.preventDefault();\n\n  //значення елемента форми\n  const searchedValue = searchFormEl.elements.user_query.value.trim();\n\n  // Перевірка на порожній запит\n  if (!searchedValue) {\n    iziToast.error({ title: 'Error', message: 'Please enter a search query!' });\n    return;\n  }\n\n  // Очищення галереї перед новим пошуком\n  galleryEl.innerHTML = '';\n\n  // викликаємо завантажувач\n  showLoader();\n\n  // Запит на сервер\n  fetch(\n    `https://pixabay.com/api/?key=45552769-3540ba49dba2ab2d34c825df8&q=${searchedValue}&image_type=photo&orientation=horizontal&safesearch=true&per_page=20`\n  )\n    // перевірка\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      return response.json();\n    })\n    // отримуємо дані\n    .then(data => {\n      // Перевірка на відсутність результатів\n      if (data.hits.length === 0) {\n        iziToast.warning({\n          title: 'Warning',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n        return;\n      }\n\n      // Перебираємо масив, додаємо всі елементи\n      const galleryCardsTemplate = data.hits\n        .map(imgDetails => createGalleryCardTemplate(imgDetails))\n        .join('');\n\n      // Додаємо в розмітку HTML\n      galleryEl.innerHTML = galleryCardsTemplate;\n\n      // Оновлюємо галерею SimpleLightbox\n      lightbox.refresh();\n    })\n    // ловимо помилку\n    .catch(err => {\n      iziToast.error({\n        title: 'Error',\n        message: `An error occurred: ${err.message}`,\n      });\n    })\n    .finally(() => {\n      // Приховуємо завантажувач після завершення запиту\n      hideLoader();\n    });\n};\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\n"],"names":["searchFormEl","galleryEl","loaderEl","createGalleryCardTemplate","imgInfo","lightbox","SimpleLightbox","showLoader","hideLoader","onSearchFormSubmit","event","searchedValue","iziToast","response","data","galleryCardsTemplate","imgDetails","err"],"mappings":"wvBAYA,MAAMA,EAAe,SAAS,cAAc,iBAAiB,EACvDC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAW,SAAS,cAAc,YAAY,EAE9CC,EAA4BC,GACzB;AAAA;AAAA,aAEIA,EAAQ,aAAa;AAAA;AAAA,aAErBA,EAAQ,YAAY;AAAA,aACpBA,EAAQ,IAAI;AAAA;AAAA;AAAA,yBAGAA,EAAQ,KAAK;AAAA,yBACbA,EAAQ,KAAK;AAAA,4BACVA,EAAQ,QAAQ;AAAA,6BACfA,EAAQ,SAAS;AAAA;AAAA;AAAA,IAO9C,IAAIC,EAAW,IAAIC,EAAe,gBAAiB,CACjD,aAAc,MACd,aAAc,GAChB,CAAC,EAGD,MAAMC,EAAa,IAAM,CACvBL,EAAS,MAAM,QAAU,OAC3B,EAGMM,EAAa,IAAM,CACvBN,EAAS,MAAM,QAAU,MAC3B,EAEMO,EAAqBC,GAAS,CAElCA,EAAM,eAAc,EAGpB,MAAMC,EAAgBX,EAAa,SAAS,WAAW,MAAM,OAG7D,GAAI,CAACW,EAAe,CAClBC,EAAS,MAAM,CAAE,MAAO,QAAS,QAAS,8BAA8B,CAAE,EAC1E,MACD,CAGDX,EAAU,UAAY,GAGtBM,IAGA,MACE,qEAAqEI,CAAa,sEACnF,EAEE,KAAKE,GAAY,CAChB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,OAAOA,EAAS,MACtB,CAAK,EAEA,KAAKC,GAAQ,CAEZ,GAAIA,EAAK,KAAK,SAAW,EAAG,CAC1BF,EAAS,QAAQ,CACf,MAAO,UACP,QACE,0EACZ,CAAS,EACD,MACD,CAGD,MAAMG,EAAuBD,EAAK,KAC/B,IAAIE,GAAcb,EAA0Ba,CAAU,CAAC,EACvD,KAAK,EAAE,EAGVf,EAAU,UAAYc,EAGtBV,EAAS,QAAO,CACtB,CAAK,EAEA,MAAMY,GAAO,CACZL,EAAS,MAAM,CACb,MAAO,QACP,QAAS,sBAAsBK,EAAI,OAAO,EAClD,CAAO,CACP,CAAK,EACA,QAAQ,IAAM,CAEbT,GACN,CAAK,CACL,EAEAR,EAAa,iBAAiB,SAAUS,CAAkB"}